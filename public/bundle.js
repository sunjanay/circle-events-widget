/*! For license information please see bundle.js.LICENSE.txt */
(()=>{function e(){var t,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(e,o,i,a){var c=o&&o.prototype instanceof l?o:l,u=Object.create(c.prototype);return n(u,"_invoke",function(e,n,o){var i,a,c,l=0,u=o||[],v=!1,d={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,a=0,c=t,d.n=n,s}};function f(e,n){for(a=e,c=n,r=0;!v&&l&&!o&&r<u.length;r++){var o,i=u[r],f=d.p,p=i[2];e>3?(o=p===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=e<2&&f<i[1])?(a=0,d.v=n,d.n=i[1]):f<p&&(o=e<3||i[0]>n||n>p)&&(i[4]=e,i[5]=n,d.n=p,a=0))}if(o||e>1)return s;throw v=!0,n}return function(o,u,p){if(l>1)throw TypeError("Generator is already running");for(v&&1===u&&f(u,p),a=u,c=p;(r=a<2?t:c)||!v;){i||(a?a<3?(a>1&&(d.n=-1),f(a,c)):d.n=c:d.v=c);try{if(l=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((r=(v=d.n<0)?c:e.call(n,d))!==s)break}catch(e){i=t,a=1,c=e}finally{l=1}}return{value:r,done:v}}}(e,i,a),!0),u}var s={};function l(){}function u(){}function v(){}r=Object.getPrototypeOf;var d=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),f=v.prototype=l.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,n(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=v,n(f,"constructor",v),n(v,"constructor",u),u.displayName="GeneratorFunction",n(v,a,"GeneratorFunction"),n(f),n(f,a,"Generator"),n(f,i,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:p}})()}function n(e,t,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}n=function(e,t,r,o){function a(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},n(e,t,r,o)}function t(e,n,t,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}document.addEventListener("DOMContentLoaded",function(){var n=document.getElementById("events-container");function r(){return o.apply(this,arguments)}function o(){var r;return r=e().m(function t(){var r,o,i,a,c;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("/api/events");case 1:if((r=e.v).ok){e.n=2;break}throw new Error("Failed to fetch events");case 2:return e.n=3,r.json();case 3:if(o=e.v,n.innerHTML="",i=o.records||o||[],0!==(a=i.filter(function(e){return e.space&&"general-events"===e.space.slug})).length){e.n=4;break}return n.innerHTML='<div class="no-events">No upcoming events found in General Events.</div>',e.a(2);case 4:a.forEach(function(e){var t=document.createElement("div");t.className="event-item";var r=new Date(e.starts_at),o=r.getDate(),i=r.toLocaleDateString("en-US",{month:"short"}),a=r.toLocaleDateString("en-US",{weekday:"long"}),c=r.getFullYear(),s=r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),l="";e.body&&(l=(l=e.body.replace(/<[^>]*>/g,"")).split(".")[0]+".").length>150&&(l=l.substring(0,150)+"..."),t.innerHTML="\n          ".concat(e.cover_image_url?'<div class="event-cover-image"><img src="'.concat(e.cover_image_url,'" alt="').concat(e.name||"Event cover",'" loading="lazy"></div>'):"",'\n          <div class="event-content">\n            <div class="event-header">\n              <div class="event-date-calendar">\n                <div class="calendar-month">').concat(i,'</div>\n                <div class="calendar-day">').concat(o,'</div>\n              </div>\n              <div class="event-datetime-info">\n                <div class="event-title">').concat(e.name||"Untitled Event",'</div>\n                <div class="event-datetime">\n                  <span class="event-time">').concat(s,'</span>\n                  <span class="event-day">').concat(a,", ").concat(c,'</span>\n                </div>\n              </div>\n            </div>\n            <div class="event-host">Hosted by: ').concat(e.host||e.member_name||"Foster Greatness","</div>\n            ").concat(l?'<div class="event-description">'.concat(l,"</div>"):"",'\n            <div class="event-location">').concat("virtual"===e.location_type?"üåê Virtual Event":"üìç In-Person","</div>\n          </div>\n        "),e.url&&(t.style.cursor="pointer",t.addEventListener("click",function(){window.open(e.url,"_blank")})),n.appendChild(t)}),e.n=6;break;case 5:e.p=5,c=e.v,console.error("Error:",c),c.message.includes("CORS")||c.message.includes("fetch")||"TypeError"===c.name?n.innerHTML='\n          <div class="error">\n            <h3>‚ö†Ô∏è CORS Restriction</h3>\n            <p>This widget needs to be served from your own domain to fetch live events from Circle.so.</p>\n            <p><strong>Options:</strong></p>\n            <ul style="text-align: left; margin: 20px 0;">\n              <li>Embed this widget on your website (not GitHub Pages)</li>\n              <li>Run locally: <code>npm run dev</code></li>\n              <li>Deploy to Vercel/Netlify with backend support</li>\n            </ul>\n            <p>For embedding instructions, see the <a href="https://github.com/sunjanay/circle-events-widget" target="_blank">GitHub repository</a>.</p>\n          </div>\n        ':n.innerHTML='\n          <div class="error">\n            Failed to load events. Please try again later.\n          </div>\n        ';case 6:return e.a(2)}},t,null,[[0,5]])}),o=function(){var e=this,n=arguments;return new Promise(function(o,i){var a=r.apply(e,n);function c(e){t(a,o,i,c,s,"next",e)}function s(e){t(a,o,i,c,s,"throw",e)}c(void 0)})},o.apply(this,arguments)}r(),setInterval(r,3e5)})})();